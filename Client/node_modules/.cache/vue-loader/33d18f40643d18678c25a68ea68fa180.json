{"remainingRequest":"/Users/juangarcia/Documents/GitHub/user-client/Client/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/juangarcia/Documents/GitHub/user-client/Client/src/views/SearchAppointment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/juangarcia/Documents/GitHub/user-client/Client/src/views/SearchAppointment.vue","mtime":1671883675441},{"path":"/Users/juangarcia/Documents/GitHub/user-client/Client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/juangarcia/Documents/GitHub/user-client/Client/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1671884494729}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgeyBMTWFwLCBMVGlsZUxheWVyLCBMTWFya2VyIH0gZnJvbSAndnVlMi1sZWFmbGV0JwppbXBvcnQgJ2xlYWZsZXQvZGlzdC9sZWFmbGV0LmNzcycKaW1wb3J0IFZ1ZVRpbWVwaWNrZXIgZnJvbSAndnVlMi10aW1lcGlja2VyJwppbXBvcnQgJ3Z1ZTItdGltZXBpY2tlci9kaXN0L1Z1ZVRpbWVwaWNrZXIuY3NzJwppbXBvcnQgJ2xlYWZsZXQtZGVmYXVsdGljb24tY29tcGF0aWJpbGl0eS9kaXN0L2xlYWZsZXQtZGVmYXVsdGljb24tY29tcGF0aWJpbGl0eS53ZWJwYWNrLmNzcycgLy8gUmUtdXNlcyBpbWFnZXMgZnJvbSB+bGVhZmxldCBwYWNrYWdlCmltcG9ydCAnbGVhZmxldC1kZWZhdWx0aWNvbi1jb21wYXRpYmlsaXR5JwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcKClZ1ZS5jb21wb25lbnQoJ3Z1ZS10aW1lcGlja2VyJywgVnVlVGltZXBpY2tlcikKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExNYXAsCiAgICBMVGlsZUxheWVyLAogICAgTE1hcmtlcgogIH0sCiAgcHJvcHM6IHsKICAgIG1lc3NhZ2U6IE9iamVjdAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIEZyb21UaW1lOiB7CiAgICAgICAgSEg6ICcwOScsCiAgICAgICAgbW06ICcwMCcKICAgICAgfSwKICAgICAgVG9UaW1lOiB7CiAgICAgICAgSEg6ICcxNycsCiAgICAgICAgbW06ICcwMCcKICAgICAgfSwKICAgICAgdXJsOiAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICBhdHRyaWJ1dGlvbjoKICAgICAgICAnJmNvcHk7IDxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSJodHRwOi8vb3NtLm9yZy9jb3B5cmlnaHQiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycycsCiAgICAgIHpvb206IDE1LAogICAgICBkYXRlOiBuZXcgRGF0ZSgpLAogICAgICBtb2RlOiAnZGF0ZScsCiAgICAgIG1hcmtlckRldGFpbHM6IFtdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmaWx0ZXIoKSB7CiAgICAgIC8vIGNsZWFuIHByZXZpb3VzIHNlYXJjaAogICAgICB0aGlzLm1hcmtlckRldGFpbHMgPSBbXQogICAgICAvKgogICAgICAvLyBzZW5kIG1lc3NhZ2Ugd2l0aCBkYXRlIGFuZCB0aW1lIGZvcm1hdGVkIGxpa2UgdGhpcyBmb3IgYmFja2VuZAogICAgICAgIHsKICAgICAgICAgICJkYXRlIjogIkRlY2VtYmVyIDEyLCAyMDIyIiwKICAgICAgICAgICJmcm9tIjogIjAxOjAwOjAwIiwKICAgICAgICAgICJ0byI6ICIwNjowMDowMCIKICAgICAgICB9CiAgICAgICovCiAgICAgIC8vIHJldHJpZXZlIGFuZCBmb3JtYXQgZGF0ZSBmcm9tIHYtY2FsZW5kYXIKICAgICAgY29uc3QgZGF0ZSA9IG1vbWVudCh0aGlzLmRhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICAgIC8vIHJldHJpZXZlICJmcm9tIHRpbWUiIGFuZCAidG8gdGltZSIgZnJvbSB0aW1lIHBpY2tlcgogICAgICBjb25zdCBmcm9tVGltZSA9IHRoaXMuRnJvbVRpbWUuSEggKyAnOicgKyB0aGlzLkZyb21UaW1lLm1tCiAgICAgIGNvbnN0IHRvVGltZSA9IHRoaXMuVG9UaW1lLkhIICsgJzonICsgdGhpcy5Ub1RpbWUubW0KICAgICAgLy8gY3JlYXRlIEpTT04gb2JqZWN0CiAgICAgIGNvbnN0IHJlcXVlc3QgPSB7CiAgICAgICAgZGF0ZTogZGF0ZSwKICAgICAgICBmcm9tOiBmcm9tVGltZSwKICAgICAgICB0bzogdG9UaW1lCiAgICAgIH0KICAgICAgY29uc29sZS5sb2cocmVxdWVzdCkKICAgICAgLy8gc2VuZCBkYXRlIHRvIGJhY2tlbmQKICAgICAgY29uc3Qgc2VhcmNoVG9waWMgPSAnZGVudGlzdGltby9kZW50aXN0LW9mZmljZS9mZXRjaC1hdmFpbGFiaWxpdHknCiAgICAgIGNvbnN0IHBheWxvYWQgPSBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KQogICAgICB0aGlzLiRwYXJlbnQuZG9QdWJsaXNoKHNlYXJjaFRvcGljLCBwYXlsb2FkKQogICAgICBjb25zdCBzdWJzY3JpYmVUb3BpYyA9ICdkZW50aXN0aW1vL2RlbnRpc3Qtb2ZmaWNlL2ZpbHRlcmVkLW9mZmljZScKICAgICAgdGhpcy4kcGFyZW50LmRvU3Vic2NyaWJlKHN1YnNjcmliZVRvcGljKQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG1lc3NhZ2U6IGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAodGhpcy5tZXNzYWdlLnRvcGljID09PSAnZGVudGlzdGltby9kZW50aXN0LW9mZmljZS9maWx0ZXJlZC1vZmZpY2UnKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lc3NhZ2UubXNnLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLm1hcmtlckRldGFpbHMucHVzaCh7CiAgICAgICAgICAgIGlkOiB0aGlzLm1hcmtlckRldGFpbHMubGVuZ3RoLAogICAgICAgICAgICBsb2NhdGlvbjogW3RoaXMubWVzc2FnZS5tc2dbaV0uY29vcmRpbmF0ZS5sYXRpdHVkZSwgdGhpcy5tZXNzYWdlLm1zZ1tpXS5jb29yZGluYXRlLmxvbmdpdHVkZV0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["SearchAppointment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchAppointment.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"pg-body\">\n    <div class=\"left\" style=\"background-color:#0092CA\">\n      <div class=\"container mt-2\">\n        <div class=\"mb-2\">\n          <div class=\"mb-2\">\n            <h1 class=\"title\" >Select a date</h1>\n            <v-date-picker\n              v-model=\"date\"\n              :mode=\"mode\" is-inline @dayclick=\"filter()\"/>\n              <h1 class=\"title\" >Select a time interval</h1>\n            <vue-timepicker v-model=\"FromTime\" :minute-interval=\"30\" @change=\"filter()\"></vue-timepicker>\n            <vue-timepicker v-model=\"ToTime\" :minute-interval=\"30\" @change=\"filter()\"></vue-timepicker>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"right\">\n      <l-map\n        ref=\"map\"\n        :zoom=\"12.5\"\n        :center=\"[57.708, 11.974560]\"\n        :options={}\n        style=\"height: 100%; width: 100%; z-index: 0\">\n        <l-tile-layer :url=\"url\" :attribution=\"attribution\" />\n        <l-marker v-for=\"marker in markerDetails\" :key=\"marker.id\" :lat-lng=\"marker.location\" :icon=\"icon\"/>\n      </l-map>\n      </div>\n  </div>\n</template>\n<script>\nimport Vue from 'vue'\nimport { LMap, LTileLayer, LMarker } from 'vue2-leaflet'\nimport 'leaflet/dist/leaflet.css'\nimport VueTimepicker from 'vue2-timepicker'\nimport 'vue2-timepicker/dist/VueTimepicker.css'\nimport 'leaflet-defaulticon-compatibility/dist/leaflet-defaulticon-compatibility.webpack.css' // Re-uses images from ~leaflet package\nimport 'leaflet-defaulticon-compatibility'\nimport moment from 'moment'\n\nVue.component('vue-timepicker', VueTimepicker)\nexport default {\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker\n  },\n  props: {\n    message: Object\n  },\n  data() {\n    return {\n      FromTime: {\n        HH: '09',\n        mm: '00'\n      },\n      ToTime: {\n        HH: '17',\n        mm: '00'\n      },\n      url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      attribution:\n        '&copy; <a target=\"_blank\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n      zoom: 15,\n      date: new Date(),\n      mode: 'date',\n      markerDetails: []\n    }\n  },\n  methods: {\n    filter() {\n      // clean previous search\n      this.markerDetails = []\n      /*\n      // send message with date and time formated like this for backend\n        {\n          \"date\": \"December 12, 2022\",\n          \"from\": \"01:00:00\",\n          \"to\": \"06:00:00\"\n        }\n      */\n      // retrieve and format date from v-calendar\n      const date = moment(this.date).format('YYYY-MM-DD')\n      // retrieve \"from time\" and \"to time\" from time picker\n      const fromTime = this.FromTime.HH + ':' + this.FromTime.mm\n      const toTime = this.ToTime.HH + ':' + this.ToTime.mm\n      // create JSON object\n      const request = {\n        date: date,\n        from: fromTime,\n        to: toTime\n      }\n      console.log(request)\n      // send date to backend\n      const searchTopic = 'dentistimo/dentist-office/fetch-availability'\n      const payload = JSON.stringify(request)\n      this.$parent.doPublish(searchTopic, payload)\n      const subscribeTopic = 'dentistimo/dentist-office/filtered-office'\n      this.$parent.doSubscribe(subscribeTopic)\n    }\n  },\n  watch: {\n    message: function (newVal, oldVal) {\n      if (this.message.topic === 'dentistimo/dentist-office/filtered-office') {\n        for (let i = 0; i < this.message.msg.length; i++) {\n          this.markerDetails.push({\n            id: this.markerDetails.length,\n            location: [this.message.msg[i].coordinate.latitude, this.message.msg[i].coordinate.longitude]\n          })\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.title{\n    font-size: 2rem;\n    font-weight: 500;\n    color: #FFFFFF;\n}\n.pg-body {\ndisplay: flex;\nalign-items: stretch;\nheight: 100vh;\n}\n.pg-body > .left {\nwidth: 325px;\noverflow: auto;\n}\n.pg-body > .right {\nflex: 1;\nposition: relative;\nbackground-color: rgb(0, 0, 0, 0.05);\n}\n.leaflet-default-icon-path {\n    background-image: url(https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png);\n}\n\n</style>\n"]}]}