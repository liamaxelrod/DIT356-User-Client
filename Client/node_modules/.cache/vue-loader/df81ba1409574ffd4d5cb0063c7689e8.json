{"remainingRequest":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/carlottahillger/Documents/University/Web Development/user-client/Client/src/views/SearchAppointment.vue?vue&type=style&index=0&id=2879eae6&scoped=true&lang=css&","dependencies":[{"path":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/src/views/SearchAppointment.vue","mtime":1672409555199},{"path":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1672409555112},{"path":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1672409555112}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50aXRsZXsKICAgIGZvbnQtc2l6ZTogMnJlbTsKICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICBjb2xvcjogI0ZGRkZGRjsKfQoucGctYm9keSB7CmRpc3BsYXk6IGZsZXg7CmFsaWduLWl0ZW1zOiBzdHJldGNoOwpoZWlnaHQ6IDEwMHZoOwp9Ci5wZy1ib2R5ID4gLmxlZnQgewp3aWR0aDogMzI1cHg7Cm92ZXJmbG93OiBhdXRvOwp9Ci5wZy1ib2R5ID4gLnJpZ2h0IHsKZmxleDogMTsKcG9zaXRpb246IHJlbGF0aXZlOwpiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMCwgMCwgMCwgMC4wNSk7Cn0KLmxlYWZsZXQtZGVmYXVsdC1pY29uLXBhdGggewogICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKGh0dHBzOi8vdW5wa2cuY29tL2xlYWZsZXRAMS43LjEvZGlzdC9pbWFnZXMvbWFya2VyLWljb24ucG5nKTsKfQoK"},{"version":3,"sources":["SearchAppointment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchAppointment.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"pg-body\">\n    <div class=\"left\" style=\"background-color:#0092CA\">\n      <div class=\"container mt-2\">\n        <div class=\"mb-2\">\n          <div class=\"mb-2\">\n            <h1 class=\"title\" >Select a date</h1>\n            <v-date-picker\n              v-model=\"date\"\n              :mode=\"mode\" is-inline @dayclick=\"filter()\"/>\n              <h1 class=\"title\" >Select a time interval</h1>\n            <vue-timepicker v-model=\"FromTime\" :minute-interval=\"30\" @change=\"filter()\"></vue-timepicker>\n            <vue-timepicker v-model=\"ToTime\" :minute-interval=\"30\" @change=\"filter()\"></vue-timepicker>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"right\">\n      <l-map\n        ref=\"map\"\n        :zoom=\"12.5\"\n        :center=\"[57.708, 11.974560]\"\n        :options={}\n        style=\"height: 100%; width: 100%; z-index: 0\">\n        <l-tile-layer :url=\"url\" :attribution=\"attribution\" />\n        <l-marker v-for=\"marker in markerDetails\" :key=\"marker.id\" :lat-lng=\"marker.location\" :icon=\"icon\"/>\n      </l-map>\n      </div>\n  </div>\n</template>\n<script>\nimport Vue from 'vue'\nimport { LMap, LTileLayer, LMarker } from 'vue2-leaflet'\nimport 'leaflet/dist/leaflet.css'\nimport VueTimepicker from 'vue2-timepicker'\nimport 'vue2-timepicker/dist/VueTimepicker.css'\nimport 'leaflet-defaulticon-compatibility/dist/leaflet-defaulticon-compatibility.webpack.css' // Re-uses images from ~leaflet package\nimport 'leaflet-defaulticon-compatibility'\nimport moment from 'moment'\n\nVue.component('vue-timepicker', VueTimepicker)\nexport default {\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker\n  },\n  props: {\n    message: Object\n  },\n  data() {\n    return {\n      FromTime: {\n        HH: '09',\n        mm: '00'\n      },\n      ToTime: {\n        HH: '17',\n        mm: '00'\n      },\n      url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      attribution:\n        '&copy; <a target=\"_blank\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n      zoom: 15,\n      date: new Date(),\n      mode: 'date',\n      markerDetails: []\n    }\n  },\n  methods: {\n    filter() {\n      // clean previous search\n      this.markerDetails = []\n      /*\n      // send message with date and time formated like this for backend\n        {\n          \"date\": \"December 12, 2022\",\n          \"from\": \"01:00:00\",\n          \"to\": \"06:00:00\"\n        }\n      */\n      // retrieve and format date from v-calendar\n      const date = moment(this.date).format('YYYY-MM-DD')\n      // retrieve \"from time\" and \"to time\" from time picker\n      const fromTime = this.FromTime.HH + ':' + this.FromTime.mm\n      const toTime = this.ToTime.HH + ':' + this.ToTime.mm\n      // create JSON object\n      const request = {\n        date: date,\n        from: fromTime,\n        to: toTime\n      }\n      console.log(request)\n      // send date to backend\n      const searchTopic = 'dentistimo/dentist-office/fetch-availability'\n      const payload = JSON.stringify(request)\n      this.$parent.doPublish(searchTopic, payload)\n      const subscribeTopic = 'dentistimo/dentist-office/filtered-office'\n      this.$parent.doSubscribe(subscribeTopic)\n    }\n  },\n  watch: {\n    message: function (newVal, oldVal) {\n      if (this.message.topic === 'dentistimo/dentist-office/filtered-office') {\n        for (let i = 0; i < this.message.msg.length; i++) {\n          this.markerDetails.push({\n            id: this.markerDetails.length,\n            location: [this.message.msg[i].coordinate.latitude, this.message.msg[i].coordinate.longitude]\n          })\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.title{\n    font-size: 2rem;\n    font-weight: 500;\n    color: #FFFFFF;\n}\n.pg-body {\ndisplay: flex;\nalign-items: stretch;\nheight: 100vh;\n}\n.pg-body > .left {\nwidth: 325px;\noverflow: auto;\n}\n.pg-body > .right {\nflex: 1;\nposition: relative;\nbackground-color: rgb(0, 0, 0, 0.05);\n}\n.leaflet-default-icon-path {\n    background-image: url(https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png);\n}\n\n</style>\n"]}]}