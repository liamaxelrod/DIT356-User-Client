{"remainingRequest":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/carlottahillger/Documents/University/Web Development/user-client/Client/src/views/ModifyPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/src/views/ModifyPassword.vue","mtime":1672838451769},{"path":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/carlottahillger/Documents/University/Web Development/user-client/Client/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1672409555112}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZm9yZ290LXBhc3N3b3JkJywKICBwcm9wczogewogICAgbWVzc2FnZTogT2JqZWN0CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgRW1haWw6ICcnLAogICAgICBQYXNzd29yZDogJycsCiAgICAgIFBhc3N3b3JkQ2hlY2s6ICcnLAogICAgICBzdWJUb3BpY01haWw6ICcnLAogICAgICBzdWJUb3BpYzogJycsCiAgICAgIHN1YlRvcGljRXJyb3I6ICcnLAogICAgICBDb2RlOiAnJwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2VuZE1haWwoKSB7CiAgICAgIC8vIGdlbmVyYXRlIHJlcXVlc3QgaWQgYW5kIHN1YnNjcmliZSB0byB0b3BpYwogICAgICBjb25zdCByZXF1ZXN0SWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMCkKICAgICAgdGhpcy5zdWJUb3BpY01haWwgPSBgZGVudGlzdGltby9zZW5kLWVtYWlsLWNvZGUvJHtyZXF1ZXN0SWR9YAogICAgICB0aGlzLiRwYXJlbnQuZG9TdWJzY3JpYmUodGhpcy5zdWJUb3BpY01haWwpCiAgICAgIC8vIHB1Ymxpc2ggbWVzc2FnZQogICAgICBjb25zdCBwdWJUb3BpYyA9ICdkZW50aXN0aW1vL3NlbmQtZW1haWwtY29kZScKICAgICAgY29uc3QgcGF5bG9hZCA9IGB7ImVtYWlsIjogIiR7dGhpcy5FbWFpbH0iLCAicmVxdWVzdElkIjogIiR7cmVxdWVzdElkfSJ9YAogICAgICB0aGlzLiRwYXJlbnQuZG9QdWJsaXNoKHB1YlRvcGljLCBwYXlsb2FkKQogICAgfSwKICAgIHN1Ym1pdCgpIHsKICAgICAgLy8gVE9ETzogY2hhbmdlIHRvcGljIG5hbWVzIHRvIHRoZSBjb3JyZWN0IG9uZXMKICAgICAgLy8gZ2VuZXJhdGUgcmVxdWVzdCBpZCBhbmQgc3Vic2NyaWJlIHRvIHRvcGljCiAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDAwKQogICAgICB0aGlzLnN1YlRvcGljID0gYGRlbnRpc3RpbW8vcmVzZXQtcGFzc3dvcmQvdXNlci8ke3JlcXVlc3RJZH1gCiAgICAgIHRoaXMuJHBhcmVudC5kb1N1YnNjcmliZSh0aGlzLnN1YlRvcGljKQogICAgICB0aGlzLnN1YlRvcGljRXJyb3IgPSBgZGVudGlzdGltby9yZXNldC1wYXNzd29yZC9lcnJvci8ke3JlcXVlc3RJZH1gCiAgICAgIHRoaXMuJHBhcmVudC5kb1N1YnNjcmliZSh0aGlzLnN1YlRvcGljKQogICAgICAvLyBwdWJsaXNoIG1lc3NhZ2UKICAgICAgY29uc3QgcHViVG9waWMgPSAnZGVudGlzdGltby9yZXNldC1wYXNzd29yZC91c2VyJwogICAgICBjb25zdCBwYXlsb2FkID0gYHsibmV3UGFzc3dvcmQiOiAiJHt0aGlzLlBhc3N3b3JkfSIsICJwYXNzd29yZENoZWNrIjogIiR7dGhpcy5QYXNzd29yZENoZWNrfSIsICJ1c2VyQ29kZSI6ICIke3RoaXMuQ29kZX0iLCAiZW1haWwiOiAiJHt0aGlzLkVtYWlsfSIsICJyZXF1ZXN0SWQiOiAiJHtyZXF1ZXN0SWR9In1gCiAgICAgIHRoaXMuJHBhcmVudC5kb1B1Ymxpc2gocHViVG9waWMsIHBheWxvYWQpCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgbWVzc2FnZTogZnVuY3Rpb24gKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAgIGlmICh0aGlzLm1lc3NhZ2UudG9waWMgPT09IHRoaXMuc3ViVG9waWMpIHsKICAgICAgICB3aW5kb3cuY29uZmlybSh0aGlzLm1lc3NhZ2UubXNnLnN0YXR1cykKICAgICAgICB0aGlzLiRwYXJlbnQuZG9VblN1YnNjcmliZSh0aGlzLnN1YlRvcGljKQogICAgICAgIHRoaXMuJHBhcmVudC5kb1VuU3Vic2NyaWJlKHRoaXMuc3ViVG9waWNNYWlsKQogICAgICAgIHRoaXMuJHBhcmVudC5kb1VuU3Vic2NyaWJlKHRoaXMuc3ViVG9waWNFcnJvcikKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3NpZ24taW4nKQogICAgICB9CiAgICAgIGlmICh0aGlzLm1lc3NhZ2UudG9waWMgPT09IHRoaXMuc3ViVG9waWNNYWlsKSB7CiAgICAgICAgd2luZG93LmNvbmZpcm0odGhpcy5tZXNzYWdlLm1zZykKICAgICAgfQogICAgICBpZiAodGhpcy5tZXNzYWdlLnRvcGljID09PSB0aGlzLnN1YlRvcGljRXJyb3IpIHsKICAgICAgICB0aGlzLiRidk1vZGFsLm1zZ0JveE9rKHRoaXMubWVzc2FnZS5tc2cpCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["ModifyPassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModifyPassword.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"container\">\n      <img src=\"@/assets/Logo.png\" alt=\"logo\" width=\"50%\" />\n      <h2>Forgot Password</h2>\n      <b-input-group class=\"input-group\">\n        <b-form-input\n          class=\"input\"\n          v-model=\"Email\"\n          placeholder=\"Email\"\n        ></b-form-input>\n        <b-input-group-append>\n          <b-button variant=\"primary\" class=\"send_btn\" @click=\"sendMail\"\n            >send</b-button\n          >\n        </b-input-group-append>\n      </b-input-group>\n      <b-form-input\n        class=\"input\"\n        v-model=\"Code\"\n        placeholder=\"code\"\n        type=\"text\"\n      ></b-form-input>\n      <b-form-input\n        class=\"input\"\n        v-model=\"Password\"\n        placeholder=\"new Password\"\n        type=\"password\"\n      ></b-form-input>\n      <b-form-input\n        class=\"input\"\n        v-model=\"PasswordCheck\"\n        placeholder=\"passwordCheck\"\n        type=\"password\"\n      ></b-form-input>\n      <b-button class=\"button\" variant=\"primary\" @click=\"submit\">Submit</b-button>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'forgot-password',\n  props: {\n    message: Object\n  },\n  data() {\n    return {\n      Email: '',\n      Password: '',\n      PasswordCheck: '',\n      subTopicMail: '',\n      subTopic: '',\n      subTopicError: '',\n      Code: ''\n    }\n  },\n  methods: {\n    sendMail() {\n      // generate request id and subscribe to topic\n      const requestId = Math.floor(Math.random() * 10000000)\n      this.subTopicMail = `dentistimo/send-email-code/${requestId}`\n      this.$parent.doSubscribe(this.subTopicMail)\n      // publish message\n      const pubTopic = 'dentistimo/send-email-code'\n      const payload = `{\"email\": \"${this.Email}\", \"requestId\": \"${requestId}\"}`\n      this.$parent.doPublish(pubTopic, payload)\n    },\n    submit() {\n      // TODO: change topic names to the correct ones\n      // generate request id and subscribe to topic\n      const requestId = Math.floor(Math.random() * 10000000)\n      this.subTopic = `dentistimo/reset-password/user/${requestId}`\n      this.$parent.doSubscribe(this.subTopic)\n      this.subTopicError = `dentistimo/reset-password/error/${requestId}`\n      this.$parent.doSubscribe(this.subTopic)\n      // publish message\n      const pubTopic = 'dentistimo/reset-password/user'\n      const payload = `{\"newPassword\": \"${this.Password}\", \"passwordCheck\": \"${this.PasswordCheck}\", \"userCode\": \"${this.Code}\", \"email\": \"${this.Email}\", \"requestId\": \"${requestId}\"}`\n      this.$parent.doPublish(pubTopic, payload)\n    }\n  },\n  watch: {\n    message: function (newVal, oldVal) {\n      if (this.message.topic === this.subTopic) {\n        window.confirm(this.message.msg.status)\n        this.$parent.doUnSubscribe(this.subTopic)\n        this.$parent.doUnSubscribe(this.subTopicMail)\n        this.$parent.doUnSubscribe(this.subTopicError)\n        this.$router.push('/sign-in')\n      }\n      if (this.message.topic === this.subTopicMail) {\n        window.confirm(this.message.msg)\n      }\n      if (this.message.topic === this.subTopicError) {\n        this.$bvModal.msgBoxOk(this.message.msg)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  padding-top: 20px;\n  text-align: center;\n}\nh2 {\n  font-size: 18px;\n  color: rgb(96, 96, 96);\n  font-weight: normal;\n}\n.input-group {\n  width: 500px;\n  margin: 20px auto;\n}\n.input-group .input {\n  margin: 0;\n}\n.input {\n  width: 500px;\n  height: 50px;\n  margin: 20px auto;\n  background-color: rgb(214, 212, 212);\n  color: black;\n}\n.send_btn {\n  padding: 0 20px;\n}\n.button {\n  margin-top: 40px;\n  padding: 8px 20px;\n}\n</style>\n"]}]}